version: v2beta1
name: gitactiontoimage


deployments:
  fastapi:
    kubectl:
      manifests:
        - ./fastapi-deployment.yaml

dev:
  fastapi:
    container: fastapi
    labelSelector:
      app: fastapi-hello   # ğŸ”¥ é—œéµï¼æŒ‡å®šé€™å€‹ labelï¼ŒDevSpace å°±èƒ½æº–ç¢ºæ‰¾ pod
    command:
      - uvicorn
      - main:app
      - --host
      - 0.0.0.0
      - --port
      - "80"
      - --reload
    sync:
      - path: ./
        excludePaths:
          - .git/
          - .venv/
          - __pycache__/

commands:
  deploy-service-once:
    command: kubectl apply -f fastapi-service.yaml
    description: åˆæ¬¡éƒ¨ç½² Serviceï¼ˆNodePort ä¸è®Šï¼‰
